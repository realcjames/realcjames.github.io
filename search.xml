<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[今世缘完美婚礼小程序总结]]></title>
    <url>%2F2019%2F07%2F04%2F%E4%BB%8A%E4%B8%96%E7%BC%98%E5%AE%8C%E7%BE%8E%E5%A9%9A%E7%A4%BC%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[今世缘完美婚礼小程序总结 先占坑 瀑布流两列或多列照片墙&amp;定宽不定高&amp;排序的实现九宫格抽奖似乎还有待优化。。。 自定义动画实现浇水功能]]></content>
      <categories>
        <category>-微信 -小程序</category>
      </categories>
      <tags>
        <tag>-微信 -小程序</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信小程序开发总结]]></title>
    <url>%2F2019%2F07%2F04%2F%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[微信小程序开发总结 先占坑，有时间一项项总结 登录鉴权 必须登录使用（公众号方式） 不登录也能用（app方式） session_key过期问题 模板消息form_id获取 请求封装授权和拒绝后的处理进入setting页面，让用户再开一次 更新机制canvas绘制分享图片&amp;保存scroll-view和view的滚动问题&amp;下拉刷新问题分享判断的问题自定义tab页的实现想不到最后竟然用了swiper…]]></content>
      <categories>
        <category>-微信 -小程序</category>
      </categories>
      <tags>
        <tag>-微信 -小程序</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS和安卓适配问题汇总]]></title>
    <url>%2F2019%2F05%2F14%2FiOS%E5%92%8C%E5%AE%89%E5%8D%93%E9%80%82%E9%85%8D%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[iOS和安卓适配问题汇总 H5input 样式问题 iOS端，input默认是有padding-left的 iOS端，input不设置height和line-height的话，placeholder不是居中二是在上方 两者边框样式不同 引入fastclick以后，iOS端的input必须双击才能获取焦点（不确定是否是fastclick的锅） 持续更新……]]></content>
      <categories>
        <category>-iOS -Android</category>
      </categories>
      <tags>
        <tag>-iOS -Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react引入postcss-pxtorem，sass和css modules]]></title>
    <url>%2F2019%2F05%2F13%2F2019-05-13%20react%E5%BC%95%E5%85%A5postcss-pxtorem%EF%BC%8Csass%E5%92%8Ccss%20modules%2F</url>
    <content type="text"><![CDATA[react引入postcss-pxtorem，sass和css modules需求: taro应该暂时不支持styled-components，于是决定在这个预热的项目里面，用sass+css modules，并且因为是移动端，响应式是必须的，这里选择pxtorem。 sass和css modules介绍：网上太多了，这里就不贴了 配置：其实最新的create-react-app脚手架应该是自带了这两个功能，只不过有一点需要注意，在yarn eject展开webpack的配置后，看到在config/webpack.config.js文件里面，有这样一段： 1234const cssRegex = /\.css$/;const cssModuleRegex = /\.module\.css$/;const sassRegex = /\.(scss|sass)$/;const sassModuleRegex = /\.module\.(scss|sass)$/; 应该可以理解为，.module.(css | scss | sass)后缀的，才能启用css modules功能。 使用： 12345import styles from 'css/PreorderMeasurement.module.scss';render() &#123; return &lt;div className=&#123;styles.test&#125; /&gt;&#125; 自定义class名： 默认的生成class名规则是这样的： Creates a class name for CSS Modules that uses either the filename or folder name if named index.module.css.For MyFolder/MyComponent.module.css and class MyClass the output will be MyComponent.module_MyClass__[hash]. For MyFolder/index.module.css and class MyClass the output will be MyFolder_MyClass__[hash]编译完以后是这样的： 1&lt;div class="PreorderMeasurement_test11__3hBMi"&gt;&lt;/div&gt; 修改这里的配置： 12345678910111213 &#123; test: sassModuleRegex, use: getStyleLoaders( &#123; importLoaders: 2, sourceMap: isEnvProduction &amp;&amp; shouldUseSourceMap, modules: true, // getLocalIdent: getCSSModuleLocalIdent, 这里是默认配置 localIdentName: '[path]__[name]__[local]___[hash:base64:5]', &#125;, 'sass-loader', ),&#125;, 再编译以后就变成这样了： 1&lt;div class="src-css-__PreorderMeasurement-module__test11___3oqbM"&gt;&lt;/div&gt; postcss-pxtorem安装配置： yarn add … yarn eject 打开webpack的相关配置 在config/webpack.config.js里找到 1234// Adds PostCSS Normalize as the reset css with default options,// so that it honors browserslist config in package.json// which in turn let's users customize the target behavior as per their needs.postcssNormalize(), 这一行，在后面加上： 123456require('postcss-pxtorem')(&#123; rootValue: 100, unitPrecision: 5, propWhiteList: ['*'], minPixelValue: 0,&#125;), index.html里面，head标签里加上： 1234567891011121314&lt;script&gt; (function (doc, win) &#123; var docEl = doc.documentElement, resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize', recalc = function () &#123; var clientWidth = docEl.clientWidth; if (!clientWidth) return; docEl.style.fontSize = 100 * (clientWidth / 750) + 'px'; &#125;; if (!doc.addEventListener) return; win.addEventListener(resizeEvt, recalc, false); doc.addEventListener('DOMContentLoaded', recalc, false); &#125;)(document, window);&lt;/script&gt; 里面的rootValue，100，750等都是可以配置的，具体看设计稿和需求，一般设计稿都是按750出的，然后100的话，方便计算rem，毕竟也可能会遇到要写行内的情况 注：有没有方法让行内写的px也转成rem?]]></content>
      <categories>
        <category>-Diary -React</category>
      </categories>
      <tags>
        <tag>-Diary -React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2019-04-24 监听页面回退，清除eventListener]]></title>
    <url>%2F2019%2F05%2F05%2F2019-04-24%20%E7%9B%91%E5%90%AC%E9%A1%B5%E9%9D%A2%E5%9B%9E%E9%80%80%EF%BC%8C%E6%B8%85%E9%99%A4eventListener%2F</url>
    <content type="text"><![CDATA[监听页面回退问题：小程序跳转到公众号的某个页面链接，中间经过授权页面，跳过去以后再回退会回到授权页。解决方案： 1234567891011created() &#123; if (window.history &amp;&amp; window.history.pushState) &#123; window.addEventListener("popstate", this.goBack, &#123; once: true &#125;); // 这个once表示 listener 在添加之后最多只调用一次。如果是 true， listener 会在其被调用之后自动移除 // 本来是计划在destroyed里面remove这个listener，但是似乎还没生效就destroy了，所以只能这样了 &#125;&#125;goBack() &#123; this.$router.go(-1);&#125; 遗留问题：能不能还是在destroyed里面remove这个listener? 清除eventListener123destroyed() &#123; window.removeEventListener("devicemotion", this.shakeListner, false);&#125;]]></content>
      <categories>
        <category>-Diary</category>
      </categories>
      <tags>
        <tag>-Diary</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2019-04-23 iPhone X适配，Vue+axiso跨域解决，类函数节流]]></title>
    <url>%2F2019%2F05%2F05%2F2019-04-23%20iPhone%20X%E9%80%82%E9%85%8D%EF%BC%8CVue%2Baxiso%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%EF%BC%8C%E7%B1%BB%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%2F</url>
    <content type="text"><![CDATA[iPhone X适配问题：公众号中的页面（Vue）有一个留言板功能，输入框是底部absolute的，点击以后，正常会键盘上浮并把整个页面推上去，input框在键盘上方，但iOS尤其是iPhone X，出现了遮挡解决过程： 1.先用了Element.scrollIntoView()无效； 2.尝试设置各种viewport-fit之类的无效； 3.最后用了聚焦时document.body.scrollTop = document.body.scrollHeight手动滑动到底部解决。 遗留问题： 1.Safari下的iPhone X，底部留白很严重，用了上述方法，键盘和input之间会出现很多留白； 2.这种方案感觉还是不够优雅。。。。 Vue+axiso跨域问题：ajax跨域。。。 解决过程：之前的项目里面是在package.json里面配置的跨域，这里是在webpack里面的config/index.js里面配置的proxyTable，这个网上教程还是比较多的。 遗留问题：这种和之前的有什么区别，为啥之前的在package.json里面配置？ 类函数节流需求：页面有个摇一摇功能，之前是每次摇都会请求，现在要改成每500ms一次，发送500ms内的请求总数 解决过程： 在网上找了个throttle函数节流的实现，但是这里的结构其实是这样的： 1234567window.addEventListener("devicemotion", () =&gt; &#123;// xxxif(xx) &#123;// 要在这里加一个节流函数&#125;// xxx&#125;, false); 这样其实是不对的。。。节流函数标准结构应该是 1window.addEventListener("devicemotion", _throttle(func, wait), false); 最后只能自己实现了一个类似的，vue里面定义一个data this.shakeTimer 1234this.shakeCount += 1;if (!this.shakeTimer) &#123; this.shakeTimer = setTimeout(() =&gt; this.run(this.shakeCount), 500);&#125; 然后在this.run里面先把this.shakeTimer和this.shakeCount清空再去请求（否则在请求返回之前的那段时间摇的次数就不会被计入了） 引申问题：似乎iOS和安卓的摇一摇速度不一样，怎么解决？手动控制多少毫秒只能有一次？]]></content>
      <categories>
        <category>-Diary</category>
      </categories>
      <tags>
        <tag>-Diary</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2019%2F04%2F25%2Fhello-world%2F</url>
    <content type="text"><![CDATA[占坑。。]]></content>
      <categories>
        <category>-free</category>
      </categories>
      <tags>
        <tag>-free</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[404]]></title>
    <url>%2F404%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[分类]]></title>
    <url>%2Fcategories%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[标签]]></title>
    <url>%2Ftags%2Findex.html</url>
    <content type="text"></content>
  </entry>
</search>
